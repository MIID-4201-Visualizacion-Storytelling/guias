<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>guias</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content=""><meta data-n-head="ssr" name="format-detection" content="telephone=no"><base href="/guias/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" data-hid="gf-prefetch" rel="dns-prefetch" href="https://fonts.gstatic.com/"><link data-n-head="ssr" data-hid="gf-preconnect" rel="preconnect" href="https://fonts.gstatic.com/" crossorigin=""><link data-n-head="ssr" data-hid="gf-preload" rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Material+Icons"><script data-n-head="ssr" data-hid="gf-script">!function(){var e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/css2?family=Material+Icons",document.querySelector("head").appendChild(e)}()</script><noscript data-n-head="ssr" data-hid="gf-noscript"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Icons"></noscript><link rel="preload" href="/guias/_nuxt/53c0541.js" as="script"><link rel="preload" href="/guias/_nuxt/ec44050.js" as="script"><link rel="preload" href="/guias/_nuxt/6b4b35f.js" as="script"><link rel="preload" href="/guias/_nuxt/f0dad64.js" as="script"><link rel="preload" href="/guias/_nuxt/c18d442.js" as="script"><style data-vue-ssr-id="6f9fdb80:0 a8238dd2:0 fa7ff0ca:0">html{box-sizing:border-box;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}*,:after,:before{box-sizing:inherit}body,html{margin:0;padding:0}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,p,pre,time{margin:0}h1,h2,h3,h4,h5,h6{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-weight:700}body{min-height:100vh}button{background:0 0;border:0;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset{border:0;margin:0;padding:0}iframe{border:0}ul{list-style:none;padding:0}ul li{margin:1em}ul li:before{content:"";width:.5em;height:.5em;display:inline-block;vertical-align:middle;background-color:#2fc1d5;margin-right:.5em;border-radius:30%}img,video{max-width:100%;height:auto}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;font-weight:400}a,a:link{text-decoration:none}::-moz-selection{background-color:#f3f0ab;color:#000}::selection{background-color:#f3f0ab;color:#000}p{line-height:1.6;margin:1.5em 0}article,h1{margin:1em}h1{text-align:center;font-size:2em}h2{border-bottom:3px solid #623c97;font-size:1.6em;margin-bottom:.3em}h2,h3{padding:.5em 0}h3{border-bottom:1px dotted;font-size:1.3em;margin-bottom:.7em}h4{font-size:1.1em}.title-icon{text-align:center;display:block;font-size:2.2em}.title-icon.non-material{width:1.5em;margin:0 auto}.subtitle-icon{color:#2fc1d5;font-size:1.2em;display:inline-block;vertical-align:middle}.inline-icon{width:32px;height:auto;display:inline-block;vertical-align:bottom;margin:1em .5em 0}table{border-collapse:collapse}th{border:1px solid}td,th{padding:.5em}td{border:1px dotted}.check{display:inline-block;vertical-align:bottom;padding-right:.3em;color:green}.check.no-puede{color:red}.check.puede{color:#767a7d}#tutorial-gds{width:100%;margin:0;height:80vh}blockquote{background-color:#ddd;font-size:.8em}blockquote p{padding:1em}.iframe-container{position:relative;overflow:hidden;width:100%;padding-top:66.66%}.iframe-container iframe{position:absolute;top:0;left:0;bottom:0;right:0;width:100%;height:100%}.historia{font-size:1.2em;background-color:rgba(231,224,87,.71373);font-weight:700;padding:1em;margin:1em 3em;color:#3c6da5}#api{background-color:#353e50;color:#fff;padding:1em}#api,#api .icono{display:inline-block}#api .icono{vertical-align:middle;margin:5px;text-align:center}#api .icono p{margin:0;max-width:80px;line-height:1}#api .material-icons{font-size:2.2em;color:#d4dcec}#api .material-icons.servicio{font-size:3em;color:#cddfe7}#api .texto{border:1px solid #ecebca;padding:.5em;border-radius:5px}.proyecto{width:33%;padding:1em;border:1px dotted #0b4b80;display:inline-block;border-radius:20px;vertical-align:top;margin:1em 0}.proyecto .descripcion{font-size:.8em}code[class*=language-],pre[class*=language-]{color:#e3eaf2;background:0 0;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{background:#3c526d}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#3c526d}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#111b27}:not(pre)>code[class*=language-]{padding:.1em .3em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8da1b9}.token.punctuation{color:#e3eaf2}.token.delimiter.important,.token.selector .parent,.token.tag,.token.tag .token.punctuation{color:#6cc}.token.attr-name,.token.boolean,.token.boolean.important,.token.constant,.token.number,.token.selector .token.attribute{color:#e6d37a}.token.class-name,.token.key,.token.parameter,.token.property,.token.property-access,.token.variable{color:#6cb8e6}.token.attr-value,.token.color,.token.inserted,.token.selector .token.value,.token.string,.token.string .token.url-link{color:#91d076}.token.builtin,.token.keyword-array,.token.package,.token.regex{color:#f4adf4}.token.function,.token.selector .token.class,.token.selector .token.id{color:#c699e3}.token.atrule .token.rule,.token.combinator,.token.keyword,.token.operator,.token.pseudo-class,.token.pseudo-element,.token.selector,.token.unit{color:#e9ae7e}.token.deleted,.token.important{color:#cd6660}.token.keyword-this,.token.this{color:#6cb8e6}.token.bold,.token.important,.token.keyword-this,.token.this{font-weight:700}.token.delimiter.important{font-weight:inherit}.token.italic{font-style:italic}.token.entity{cursor:help}.language-markdown .token.title,.language-markdown .token.title .token.punctuation{color:#6cb8e6;font-weight:700}.language-markdown .token.blockquote.punctuation{color:#f4adf4}.language-markdown .token.code{color:#6cc}.language-markdown .token.hr.punctuation{color:#6cb8e6}.language-markdown .token.url .token.content{color:#91d076}.language-markdown .token.url-link{color:#e6d37a}.language-markdown .token.list.punctuation{color:#f4adf4}.language-json .token.operator,.language-markdown .token.table-header{color:#e3eaf2}.language-scss .token.variable{color:#6cc}.token.token.cr:before,.token.token.lf:before,.token.token.space:before,.token.token.tab:not(:empty):before{color:#8da1b9}div.code-toolbar>.toolbar.toolbar>.toolbar-item>a,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button{color:#111b27;background:#6cb8e6}div.code-toolbar>.toolbar.toolbar>.toolbar-item>a:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>a:hover,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button:hover{color:#111b27;background:rgba(108,184,230,.8549);text-decoration:none}div.code-toolbar>.toolbar.toolbar>.toolbar-item>span,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span:hover{color:#111b27;background:#8da1b9}.line-highlight.line-highlight{background:rgba(60,82,109,.37255);background:linear-gradient(90deg,rgba(60,82,109,.37255) 70%,rgba(60,82,109,.33333))}.line-highlight.line-highlight:before,.line-highlight.line-highlight[data-end]:after{background-color:#8da1b9;color:#111b27;box-shadow:0 1px #3c526d}pre[id].linkable-line-numbers.linkable-line-numbers span.line-numbers-rows>span:hover:before{background-color:rgba(141,161,185,.09412)}.line-numbers.line-numbers .line-numbers-rows{border-right:1px solid #0b121b;background:rgba(11,18,27,.47843)}.line-numbers .line-numbers-rows>span:before{color:rgba(141,161,185,.8549)}.rainbow-braces .token.token.punctuation.brace-level-1,.rainbow-braces .token.token.punctuation.brace-level-5,.rainbow-braces .token.token.punctuation.brace-level-9{color:#e6d37a}.rainbow-braces .token.token.punctuation.brace-level-10,.rainbow-braces .token.token.punctuation.brace-level-2,.rainbow-braces .token.token.punctuation.brace-level-6{color:#f4adf4}.rainbow-braces .token.token.punctuation.brace-level-11,.rainbow-braces .token.token.punctuation.brace-level-3,.rainbow-braces .token.token.punctuation.brace-level-7{color:#6cb8e6}.rainbow-braces .token.token.punctuation.brace-level-12,.rainbow-braces .token.token.punctuation.brace-level-4,.rainbow-braces .token.token.punctuation.brace-level-8{color:#c699e3}pre.diff-highlight>code .token.token.deleted:not(.prefix),pre>code.diff-highlight .token.token.deleted:not(.prefix){background-color:rgba(205,102,96,.12157)}pre.diff-highlight>code .token.token.inserted:not(.prefix),pre>code.diff-highlight .token.token.inserted:not(.prefix){background-color:rgba(145,208,118,.12157)}.command-line .command-line-prompt{border-right:1px solid #0b121b}.command-line .command-line-prompt>span:before{color:rgba(141,161,185,.8549)}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}</style><link rel="preload" href="/guias/_nuxt/static/1645660601/3-1-extraer-limpiar/state.js" as="script"><link rel="preload" href="/guias/_nuxt/static/1645660601/3-1-extraer-limpiar/payload.js" as="script"><link rel="preload" href="/guias/_nuxt/static/1645660601/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><main><article><h1>Extraer y Limpiar</h1> <div class="nuxt-content"><h2 id="introducción"><a href="#introducci%C3%B3n" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Introducción</h2>
<p>Esta semana vamos a trabajar en conceptos básicos de modelado de datos para visualización, la fase exploratoria de los datos donde nos concentramos en formas de narrar a nosotros mismos. La semana pasada trabajaron en visualizaciones que buscaban contar una historia persuasiva, pero para llegar a esto debemos entender primero la naturaleza de los datos, conocer su estructura, observar patrones, y comenzar a hacernos preguntas que investigamos por medio de la manipulación y visualización rápida de los datos.
Cuando estamos tratando de contar una historia persuasiva a un público general, las estrategias de visualización están dirigidas con precisión a aquello que hemos descubierto tras un proceso de análisis profundo de los datos. En cambio, la narración a nosotros mismos es más abierta a interpretaciones, expone múltiples posibilidades y poco a poco se va acotando hasta adquirir sentidos más singulares.</p>
<p>Para entender esto en términos de storytelling, piensen en todas las fotos que tienen guardadas en su celular. Estas esconden pistas de quiénes son ustedes: sus gustos, las personas o animales importantes en su vida, momentos que quieren recordar, etc. Esa colección de imágenes en sus múltiples facetas se parece a nuestros datos crudos, pues tiene muchas posibles historias por contar. Si quisieran reconocer esas historias, podrían comenzar a definir tipos de fotos y, en ese proceso, identificar algunos patrones que los definen a ustedes. Lo que estamos haciendo esta semana es esa tipificación: darle orden a una colección aparentemente desordenada. Estamos viendo todas las fotos pero bajo una estructura que nos revela a nosotros mismos las posibles historias. Singularizar algunas de ellas, escoger una en específico y articularla a un público general es lo que hacemos tras el proceso de modelado (tipificación, filtro y observación de toda la colección). En mi caso, de todas las fotos que tengo en el celular, puedo reconocer que algo importante en mi vida es mi gata Nila, quien llegó durante la pandemia y se las quiero presentar.</p>
<img src="/guias/vysimgs/nila.jpg" alt="Nila">
<p><strong>Ejercicio (opcional)</strong>
<em>¿Tienen una foto en su celular que cuente una historia de su vida? Pueden compartirla en el canal de Intrographics en Slack y así nos conocemos un poco más entre todos. En este pequeño ejercicio harán mentalmente el proceso de modelado para tomar la decisión de la foto que quieren compartir</em>.</p>
<h3 id="extraer"><a href="#extraer" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Extraer</h3>
<p>Ahora sí entremos en asunto. En este tutorial vamos a trabajar en la primera fase de modelado, que consiste en elegir nuestra fuente de datos (extraer) y explorarla para reconocer lo que tenemos en nuestras manos (limpiar).</p>
<p>En el momento de decidir nuestra fuente de datos para análisis y visualización tenemos dos tipos de fuentes disponibles:</p>
<ol>
<li><strong>Datos estáticos</strong>: que están alojados en un archivo (.csv, .json, .xls, etc.) o en una base de datos. En este caso podemos ver la estructura y los datos completos.</li>
<li><strong>Datos dinámicos</strong>: que extraemos por medio de una aplicación (API, sensores o aplicaciones con cálculos matemáticos en tiempo real). En este tipo de fuente podemos reconocer la estructura inicial de los datos y una muestra de los que produce la aplicación, pero no conocemos todos los datos de manera anticipada como en el caso anterior.</li>
</ol>
<p>En ambos, la primera aproximación a los datos la hacemos estudiando su estructura original y nuestro primer trabajo es definir el tipo de datos que le corresponde a cada variable. Observar la estructura es apenas una mirada parcial y opaca de las potencias que tiene la base de datos, pero es un paso importante para investigarlos.</p>
<p>Esta semana vamos a trabajar sobre una base de datos que nos muestra los sueldos de profesionales en diferentes disciplinas. La vamos a tratar de manera estática a pesar de ser una fuente que se actualiza recurrentemente (la próxima semana vamos a trabajar con datos dinámicos): <a href="https://docs.google.com/spreadsheets/d/1IPS5dBSGtwYVbjsfbaMCYIWnOuRmJcbequohNxCyGVw/edit?resourcekey#gid=1625408792" rel="nofollow noopener noreferrer" target="_blank">https://docs.google.com/spreadsheets/d/1IPS5dBSGtwYVbjsfbaMCYIWnOuRmJcbequohNxCyGVw/edit?resourcekey#gid=1625408792</a></p>
<p>La primera vista del archivo nos revela la forma como están estructurados los datos y los tipos de variables disponibles:</p>
<img src="/guias/vysimgs/base-de-datos-s2.jpg">
<blockquote>
<p><strong>Figura 1</strong><br>
<em>Estructura de datos “Ask A Manager Salary Survey 2021 (Responses)”</em><br>
Fuente: <a href="https://docs.google.com/spreadsheets/d/1IPS5dBSGtwYVbjsfbaMCYIWnOuRmJcbequohNxCyGVw/edit?resourcekey#gid=1625408792" rel="nofollow noopener noreferrer" target="_blank">https://docs.google.com/spreadsheets/d/1IPS5dBSGtwYVbjsfbaMCYIWnOuRmJcbequohNxCyGVw/edit?resourcekey#gid=1625408792</a></p>
</blockquote>
<p>En un paneo rápido por el archivo podemos reconocer que hay dos tipos de variables: <strong>texto</strong> y <strong>números</strong>. Algunos campos de texto representan lugares geográficos y los números representan valores monetarios. (También hay variables con números como: <em>“How old are you?”</em>, <em>“Overall years of profesional experience”</em> y <em>“Years of experience in the field”</em>, pero en su estado crudo en la base de datos son variables de texto).</p>
<p>Incluso podemos reconocer que la población es principalmente estadounidense y con un esfuerzo adicional parece que son principalmente mujeres blancas. Seguro hay más cosas por descubrir, así que el primer paso es extraer esta base de datos para poderla trabajar.</p>
<p>Pueden descargar los datos en .csv desde <strong>“File -> Download -> Comma Separated Values (.csv)”</strong> y montarlos en su aplicación de visualización.</p>
<p>Si usan <em>Google Data Studio</em>, pueden hacer una copia a su propia cuenta desde <strong>“File -> Make a Copy”</strong>. Luego van a Google Data Studio, crean un reporte nuevo y en la opción <strong>“Connect Data”</strong> usan la opción <strong>“Google Sheets”</strong></p>
<img src="/guias/vysimgs/Inkedgoogle-sheets_LI.jpg">
<blockquote>
<p><strong>Figura 2</strong><br>
<em>Conexión con Google Sheets paso 1</em></p>
</blockquote>
<p>Aquí van a poder seleccionar la copia que acaban de hacer.</p>
<img src="/guias/vysimgs/survery.jpg">
<blockquote>
<p><strong>Figura 3</strong><br>
<em>Conexión con Google Sheets paso 2</em></p>
</blockquote>
<p>Al cargar los datos, pueden ver que <em>Google Data Studio</em> reconoce inicialmente los tipos de variables que identificamos anteriormente: textos (ícono “ABC”) y números (ícono “123”). Se debe ver algo así:</p>
<img src="/guias/vysimgs/variables.jpg">
<blockquote>
<p><strong>Figura 4</strong><br>
<em>Variables iniciales</em></p>
</blockquote>
<p>Ahora tenemos que especificar mejor estas variables definiendo el tipo de datos para comenzar el proceso de modelado. En <em>Google Data Studio</em> van a <strong>“Resource -> Manage added data sources”</strong></p>
<img src="/guias/vysimgs/data-sources.jpg">
<blockquote>
<p><strong>Figura 5</strong><br>
<em>Fuentes de datos conectadas con el reporte</em></p>
</blockquote>
<p>En la nueva pantalla seleccionan la opción <strong>“Edit”</strong></p>
<img src="/guias/vysimgs/edit.jpg">
<blockquote>
<p><strong>Figura 6</strong><br>
<em>Editar variables de la fuente de datos</em></p>
</blockquote>
<p>En este espacio podemos editar y documentar las variables, idealmente el tipo de dato debe ser lo más específico posible. Por ejemplo, sabemos que hay campos con información georgráfica que no son simplemente textos. Cambien <strong>“City”</strong> y <strong>“Country”</strong> a variables <strong>“Geo -> City”</strong> y <strong>“Geo -> Country”</strong> respectivamente. Van a ver que cambia el ícono de texto a uno con un globo como se ve acá:</p>
<img src="/guias/vysimgs/modelado-source.jpg">
<blockquote>
<p><strong>Figura 7</strong><br>
<em>Definición de variables</em></p>
</blockquote>
<p>En este punto tenemos los datos bien definidos para la base de datos inicial y podemos comenzar a visualizarlos.</p>
<p>Por último, una buena práctica a la hora de definir las variables es usar nombres cortos y descriptivos. Al mismo tiempo, agregar descripciones a medida que vamos modelando los datos nos ayuda a mantener bien documentado nuestro trabajo para facilitar nuevas iteraciones que hagamos sobre ellos y para poder entregarle nuestro trabajo a otra persona para que continúe desarrollando. A mí, por ejemplo, me gusta trabajar en español, así que cambié los nombres de las variables y agregué unas primeras descripciones. Así se ve mi primera fase de modelado en <em>Google Data Studio</em>:</p>
<img src="/guias/vysimgs/nombrar-describir.jpg">
<blockquote>
<p><strong>Figura 8</strong><br>
<em>Nombres y descripciones en Google Data Studio</em></p>
</blockquote>
<p>Ustedes pueden mantener los nombres de las variables en inglés o crear sus propias traducciones. Cuando lo decidan, sean consistentes con todas las variables.</p>
<h3 id="limpiar"><a href="#limpiar" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Limpiar</h3>
<p>La base de datos con la que estamos trabajando esta semana es un ejemplo típico de la vida real, ofrece información interesante, pero puede estar llena de errores que debemos corregir.</p>
<p>Si revisamos el <a href="https://www.askamanager.org/2021/04/how-much-money-do-you-make-4.html" target="_blank">formulario</a> desde el cual se capturan los datos, vamos a ver que hay varios campos de texto libre como <strong>“Country”</strong>. Esto produce resultados como el siguiente mapa:</p>
<img src="/guias/vysimgs/mapa-sin-limpiar.png">
<blockquote>
<p><strong>Figura 9</strong><br>
<em>Nombres y descripciones en Google Data Studio</em>
Para ver el reporte interactivo ir a: <a href="https://datastudio.google.com/reporting/369461f0-a5e7-4593-bf70-1d747e3ffc6c" rel="nofollow noopener noreferrer" target="_blank">https://datastudio.google.com/reporting/369461f0-a5e7-4593-bf70-1d747e3ffc6c</a></p>
</blockquote>
<p><strong>¡Es un desastre! ¿Cuántas instancias diferentes hay de Estados Unidos?</strong> Hay muchas formas de escribir el nombre de un país y nuestra aplicación simplemente no las reconoce como uno solo.</p>
<p>Para limpiar los datos tienen dos opciones:</p>
<ul>
<li><strong>Limpieza manual</strong>: Directamente en Excel o Google Sheets, pueden elegir una única forma de escribir el nombre de un país, buscar todas las otras y reemplazarlas por la que eligieron. Esto puede ser un proceso tedioso y poco productivo si queremos actualizar los datos en el futuro.</li>
<li><strong>Limpieza con “scripts”</strong>: En este caso debemos usar programación para automatizar la limpieza, implica siempre el reto de crear las fórmulas y probarlas detenidamente, pero una vez tenemos esto, actualizar los datos es automático y efectivo para un proyecto.</li>
</ul>
<p>Para este ejercicio pueden elegir la opción que más les convenga, ya que estamos trabajando sobre datos estáticos que no van a cambiar en el futuro. Pero les voy a mostrar cómo crear un script para limpiar país en <em>Google Data Studio</em>:</p>
<p>Pueden ver el siguiente video para el paso a paso, también está escrito después del video:</p>
<video controls muted>
  <source src="/guias/vysvideos/limpiar-pais.mp4" type="video/mp4">
</video>
<ul>
<li>Vamos de nuevo a <strong>“Resource -> Manage added data sources”</strong> seleccionamos <strong>“EDIT”</strong>.</li>
<li>Cambiamos el nombre de la variable que está sucia, <strong>“País - Sucio”</strong>. Esto lo hacemos para poder identificar fácilmente la variable que vamos a reemplazar.</li>
<li>Creamos un nuevo campo seleccionando <strong>“ADD FIELD”</strong>.</li>
<li>Le damos un nombre a la variable en <strong>“Field name”</strong>. En mi caso va a ser <strong>“País”</strong> para saber que esta es la que va a quedar limpia.</li>
<li>A continuación, la fórmula que parcialmente limpia el campo deben completarla ustedes:</li>
</ul>
<div class="nuxt-content-highlight"><pre class="language-sql line-numbers"><code><span class="token keyword">CASE</span>
<span class="token keyword">WHEN</span> TRIM<span class="token punctuation">(</span>LOWER<span class="token punctuation">(</span>País <span class="token operator">-</span> Sucio<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token string">"u.s."</span><span class="token punctuation">,</span> <span class="token string">"united states"</span><span class="token punctuation">,</span> <span class="token string">"us"</span><span class="token punctuation">,</span> <span class="token string">"america"</span><span class="token punctuation">,</span> <span class="token string">"the united states"</span><span class="token punctuation">,</span> <span class="token string">"the us"</span><span class="token punctuation">,</span> <span class="token string">"u. s"</span><span class="token punctuation">,</span> <span class="token string">"u. s."</span><span class="token punctuation">,</span> <span class="token string">"u.a."</span><span class="token punctuation">,</span> <span class="token string">"u.s"</span><span class="token punctuation">,</span> <span class="token string">"u.s."</span><span class="token punctuation">,</span> <span class="token string">"u.s>"</span><span class="token punctuation">,</span> <span class="token string">"u.sa"</span><span class="token punctuation">,</span> <span class="token string">"ua"</span><span class="token punctuation">,</span> <span class="token string">"u.s.a."</span><span class="token punctuation">,</span> <span class="token string">"usa"</span><span class="token punctuation">,</span> <span class="token string">"u.s.a"</span><span class="token punctuation">,</span> <span class="token string">"uxz"</span><span class="token punctuation">,</span> <span class="token string">"united y"</span><span class="token punctuation">,</span> <span class="token string">"united statss"</span><span class="token punctuation">,</span> <span class="token string">"uniteed states"</span><span class="token punctuation">,</span> <span class="token string">"usa (company is based in a us territory, i work remote)"</span><span class="token punctuation">,</span> <span class="token string">"usa-- virgin islands"</span><span class="token punctuation">,</span> <span class="token string">"usa, but for foreign gov't"</span><span class="token punctuation">,</span> <span class="token string">"uniited states"</span><span class="token punctuation">,</span> <span class="token string">"unite states"</span><span class="token punctuation">,</span> <span class="token string">"united states"</span><span class="token punctuation">,</span> <span class="token string">"united states of america"</span><span class="token punctuation">,</span> <span class="token string">"unites states"</span><span class="token punctuation">,</span> <span class="token string">"usa tomorrow"</span><span class="token punctuation">,</span> <span class="token string">"unitef stated"</span><span class="token punctuation">,</span> <span class="token string">"united states of american"</span><span class="token punctuation">,</span> <span class="token string">"united stares"</span><span class="token punctuation">,</span> <span class="token string">"united state"</span><span class="token punctuation">,</span> <span class="token string">"united state of america"</span><span class="token punctuation">,</span> <span class="token string">"united stated"</span><span class="token punctuation">,</span> <span class="token string">"united stateds"</span><span class="token punctuation">,</span> <span class="token string">"united states is america"</span><span class="token punctuation">,</span> <span class="token string">"unitedstates"</span> <span class="token punctuation">)</span> <span class="token keyword">THEN</span> <span class="token string">"USA"</span>
<span class="token keyword">WHEN</span> TRIM<span class="token punctuation">(</span>LOWER<span class="token punctuation">(</span>País <span class="token operator">-</span> Sucio<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token string">"united kingdom"</span><span class="token punctuation">,</span> <span class="token string">"uk"</span> <span class="token punctuation">)</span> <span class="token keyword">THEN</span> <span class="token string">"UK"</span>
<span class="token keyword">ELSE</span> TRIM<span class="token punctuation">(</span>País <span class="token operator">-</span> Sucio<span class="token punctuation">)</span>
<span class="token keyword">END</span>
</code></pre></div>
<ul>
<li>Vuelven a entrar a <strong>“EDIT”</strong> y cambian el tipo de variable a <strong>“Geo -> Country”</strong>.</li>
<li>(Opcional) Pueden esconder la variable que acabamos de reemplazar picando en los tres puntos grises al lado del nombre y seleccionan la opción <strong>“Hide”</strong>.</li>
</ul>
<p>Veamos parte por parte lo que está haciendo la fórmula:</p>
<ul>
<li><code>CASE</code> abre la función y <code>END</code> la cierra.</li>
<li>Entre <code>WHEN</code> e <code>IN</code> seleccionamos la variable que queremos revisar que es <strong>“País- Sucio”</strong>.</li>
<li>La variable <strong>“País - Sucio”</strong> la estoy transformando antes de compararla usando las funciones <code>TRIM()</code> y <code>LOWER()</code>. <code>TRIM()</code> borra espacios al principio y al final del texto, un problema común en campos de texto manuales como este. <code>LOWER()</code> por otro lado, convierte todas las mayúsculas en minúsculas, para no tener que revisar tantas versiones del mismo texto. Por ejemplo, si no usamos <code>LOWER()</code>, el texto <em>“United States”</em> es diferente a <em>“united states”</em>, pero usando la función <code>LOWER()</code>, ambos son iguales y nos ahorramos mucho trabajo manual.</li>
<li>Teniendo en cuenta que transformamos el texto a minúsculas, podemos poner entre los paréntesis todas las versiones que significan lo mismo en minúsculas y no como están escritas en la base de datos.</li>
<li>Luego de poner todas las versiones en las que está escrito el nombre de un país en la base de datos, concluimos la transformación escribiendo la versión que nosotros queremos usar después del <code>THEN</code>.</li>
<li>Cuando terminen su fórmula, recuerden hacer clic en el botón <strong>“UPDATE”</strong> para guardar los cambios.</li>
</ul>
<p>La fórmula que les estoy dejando como base es apenas una versión de cómo crear sus scripts. A medida que adquieran habilidades en programación, pueden crear fórmulas más cortas usando funciones como <strong>“REGEX”</strong> de manera inteligente y efectiva. Por ahora pueden completar la fórmula que les dejé acá para terminar de limpiar este campo.</p>
<h3 id="un-guiño-a-las-prácticas-open-source"><a href="#un-gui%C3%B1o-a-las-pr%C3%A1cticas-open-source" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Un guiño a las prácticas open-source</h3>
<p>En este curso pueden compartir entre ustedes soluciones de programación para los ejercicios. Si alguien quiere compartir su solución al script con sus compañeros, siéntanse libres de hacerlo en el Slack. Aparte de ser permitido, ¡lo celebro!, pues este curso no se trata tanto de que aprendan a programar, sino de que aprendan a narrar. Entiendo que hay procesos técnicos que son necesarios para hacer las visualizaciones y se pueden ayudar entre todos para lograrlo. Espacios como Github o StackOverflow han demostrado la potencia de compartir y trabajar en comunidad, acá podemos hacer eco de estas nuevas formas pedagógicas.</p>
<h2 id="conclusiones"><a href="#conclusiones" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Conclusiones</h2>
<ul>
<li>El proceso de nombrar y tipificar las variables nos permite investigar los datos de manera inicial para comenzar a hacer preguntas y definir si necesitamos nuevas variables.</li>
<li>Agregar descripciones a las variables es buena práctica profesional.</li>
<li>Limpiar los datos es un proceso que puede ser tedioso y demorado, los scripts nos ayudan a agilizar este proceso.</li>
<li>Limpiar los datos manualmente siempre es una posibilidad para datos estáticos. Los scripts, por otro lado, hacen que el proceso sea transferible a nuevos datos similares o permiten reproducir el modelado sobre nuevas versiones de la misma base de datos.</li>
</ul></div></article></main></div></div><script defer src="/guias/_nuxt/static/1645660601/3-1-extraer-limpiar/state.js"></script><script src="/guias/_nuxt/53c0541.js" defer></script><script src="/guias/_nuxt/c18d442.js" defer></script><script src="/guias/_nuxt/ec44050.js" defer></script><script src="/guias/_nuxt/6b4b35f.js" defer></script><script src="/guias/_nuxt/f0dad64.js" defer></script>
  </body>
</html>
